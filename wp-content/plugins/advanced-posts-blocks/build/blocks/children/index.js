!function(){"use strict";var e={n:function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,{a:o}),o},d:function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,o=window.wp.blocks,n=window.lodash,r=window.wp.components,s=window.wp.i18n,l=window.wp.serverSideRender,a=e.n(l),c=window.wp.blockEditor;const d=1,i=100;function p(e){var o;let{numberOfItems:n,order:l,orderBy:a,offset:c,ignoreStickyPosts:p,maxItems:u=i,minItems:g=d,showAllPosts:b,postType:y,onNumberOfItemsChange:m,onOrderChange:h,onOrderByChange:_,onOffsetChange:C,onIgnoreStickyPostsChange:v,onshowAllPostsChange:k}=e;const f=[{label:(0,s.__)("Date","advanced-posts-blocks"),value:"date"},{label:(0,s.__)("Title","advanced-posts-blocks"),value:"title"}];return[_&&(0,t.createElement)(r.SelectControl,{key:"query-controls-order-by-select",label:(0,s.__)("Order by","advanced-posts-blocks"),value:a,options:null!=y&&null!==(o=y.supports)&&void 0!==o&&o["page-attributes"]?[...f,{label:(0,s.__)("Page Order","advanced-posts-blocks"),value:"menu_order"}]:f,onChange:e=>{e!==a&&_(e)}}),h&&(0,t.createElement)(r.SelectControl,{key:"query-controls-order-select",label:(0,s.__)("Order","advanced-posts-blocks"),value:l,options:[{label:(0,s.__)("DESC","advanced-posts-blocks"),value:"desc"},{label:(0,s.__)("ASC","advanced-posts-blocks"),value:"asc"}],onChange:e=>{e!==l&&h(e)}}),!b&&m&&(0,t.createElement)(r.RangeControl,{key:"query-controls-range-control",label:(0,s.__)("Number of items","advanced-posts-blocks"),value:n,onChange:m,min:g,max:u}),v&&(0,t.createElement)(r.CheckboxControl,{key:"query-controls-nopaging-control",label:(0,s.__)("Show all posts","advanced-posts-blocks"),checked:b,onChange:k}),C&&(0,t.createElement)(r.RangeControl,{key:"query-controls-offset-control",label:(0,s.__)("Offset","advanced-posts-blocks"),value:c,onChange:C,min:0,max:u}),v&&(0,t.createElement)(r.CheckboxControl,{key:"query-controls-ignore-sticky-posts-control",label:(0,s.__)("Ignore sticky posts","advanced-posts-blocks"),checked:p,onChange:v})]}var u=window.wp.data;const g=(e,t)=>(0,u.useSelect)((o=>""===t.search?[]:o("core").getEntityRecords("postType",e.slug,t)||[]),[e.slug,t]);var b=e=>{let{onChange:o,value:n,filter:l=(()=>!0)}=e;const a=(0,u.useSelect)((e=>e("core").getPostTypes({per_page:-1})||[]),[]).filter((e=>!["attachment","wp_block"].includes(e.slug))).filter(l);return(0,t.createElement)(r.SelectControl,{label:(0,s.__)("Post Type","advanced-posts-blocks"),value:n.slug,options:a.map((e=>({label:e.name,value:e.slug}))),onChange:e=>{const t=a.find((t=>t.slug===e));o(t)}})},y=JSON.parse('{"name":"advanced-posts-blocks/children","apiVersion":2,"title":"Child Posts","description":"Display children of selected post.","icon":"admin-page","textdomain":"advanced-posts-blocks","attributes":{"align":{"type":"string","enum":["center","wide","full"]},"postType":{"type":"string","default":"page"},"postId":{"type":"number","default":0},"postsToShow":{"type":"number","default":-1},"order":{"type":"string","default":"asc"},"orderBy":{"type":"string","default":"title"}},"supports":{"align":["center","wide","full"],"html":false},"category":"widgets","editorScript":"file:./index.js"}');const{name:m}=y;const{name:h,supports:_,category:C}=y,v=(0,s.__)("Child Posts","advanced-posts-blocks");(0,o.registerBlockType)(h,{supports:_,category:C,title:`${v} (Advanced Posts Blocks)`,description:(0,s.__)("Display children of selected post.","advanced-posts-blocks"),keywords:["child posts","children",(0,s.__)("children posts","advanced-posts-blocks")],icon:(0,t.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,t.createElement)(r.Path,{d:"M19,15 C20.1045695,15 21,15.8954305 21,17 L21,19 C21,20.1045695 20.1045695,21 19,21 L17,21 C15.8954305,21 15,20.1045695 15,19 L15,17 C15,15.8954305 15.8954305,15 17,15 L17,13 L7,13 L7,15 C8.1045695,15 9,15.8954305 9,17 L9,19 C9,20.1045695 8.1045695,21 7,21 L5,21 C3.8954305,21 3,20.1045695 3,19 L3,17 C3,15.8954305 3.8954305,15 5,15 L5,13 C5,11.8954305 5.8954305,11 7,11 L11,11 L11,9 C9.8954305,9 9,8.1045695 9,7 L9,5 C9,3.8954305 9.8954305,3 11,3 L13,3 C14.1045695,3 15,3.8954305 15,5 L15,7 C15,8.1045695 14.1045695,9 13,9 L13,11 L17,11 C18.1045695,11 19,11.8954305 19,13 L19,15 Z M5,17 L5,19 L7,19 L7,17 L5,17 Z M17,17 L17,19 L19,19 L19,17 L17,17 Z M11,5 L11,7 L13,7 L13,5 L11,5 Z"})),edit:e=>{let{attributes:o,setAttributes:l}=e;const{postsToShow:d,order:i,orderBy:h,postType:_}=o,{postId:C}=o,v=(0,u.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),k=(0,u.useSelect)((e=>e("core/editor").getCurrentPostId()),[]),f=(w=_||v,(0,u.useSelect)((e=>e("core").getPostType(w)||{}),[w]));var w;const L=g(f,{orderby:h,per_page:-1}),E=g(f,(0,n.pickBy)({order:i,parent:C||k,orderby:h,per_page:d,ignore_sticky_posts:1},(e=>!!e)))||[],P=f.labels||{},S=(0,s.__)("Query setting","advanced-posts-blocks"),O=function(e){const t=e.map((e=>({children:[],parent:0,...e}))),o=(0,n.groupBy)(t,"parent");if(o.null&&o.null.length)return t;const r=e=>e.map((e=>{const t=o[e.id];return{...e,children:t&&t.length?r(t):[]}}));return r(o[0]||[])}(L.map((e=>({id:e.id,parent:e.parent,name:e.title.raw?e.title.raw:`#${e.id} ${(0,s.__)("(no title)","advanced-posts-blocks")}`})))),T=e=>e.map((e=>e.children.length>0?{...e,children:T(e.children)}:null)).filter((e=>e)),B=(0,t.createElement)(r.TreeSelect,{label:P.parent_item_colon,noOptionLabel:`${(0,s.__)("(This Page)","advanced-posts-blocks")}`,tree:T(O),selectedId:C,onChange:e=>{l({postId:e?parseInt(e):void 0})}}),I=(0,t.createElement)(c.InspectorControls,null,(0,t.createElement)(r.PanelBody,{title:S},(0,t.createElement)(b,{value:f,filter:e=>{let{supports:t}=e;return t["page-attributes"]},onChange:e=>{l({postType:e.slug}),null!=e&&e.supports["page-attributes"]||"menu_order"!==h||l({orderBy:y.attributes.orderBy.default})}}),B,(0,t.createElement)(p,{postType:f,showAllPosts:!0,order:i,orderBy:h,numberOfItems:d,onOrderChange:e=>l({order:e}),onOrderByChange:e=>l({orderBy:e}),onNumberOfItemsChange:e=>l({postsToShow:e})}))),A=Array.isArray(E)&&E.length;return(0,t.createElement)("div",(0,c.useBlockProps)(),I,A?(0,t.createElement)(r.Disabled,null,(0,t.createElement)(a(),{block:m,attributes:o})):(0,t.createElement)(r.Placeholder,{icon:"admin-post",label:(0,s.__)("Child Posts","advanced-posts-blocks")},Array.isArray(E)?P.not_found:(0,t.createElement)(r.Spinner,null)))},save:()=>null})}();