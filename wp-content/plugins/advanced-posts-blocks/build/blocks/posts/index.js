!function(){"use strict";var e={n:function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,{a:o}),o},d:function(t,o){for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,o=window.wp.blocks,s=window.lodash,n=window.wp.components,l=window.wp.i18n,r=window.wp.serverSideRender,a=e.n(r),c=window.wp.blockEditor;const d=1,i=100;function p(e){var o;let{numberOfItems:s,order:r,orderBy:a,offset:c,ignoreStickyPosts:p,maxItems:u=i,minItems:m=d,showAllPosts:g,postType:y,onNumberOfItemsChange:b,onOrderChange:v,onOrderByChange:h,onOffsetChange:f,onIgnoreStickyPostsChange:_,onshowAllPostsChange:k}=e;const w=[{label:(0,l.__)("Date","advanced-posts-blocks"),value:"date"},{label:(0,l.__)("Title","advanced-posts-blocks"),value:"title"}];return[h&&(0,t.createElement)(n.SelectControl,{key:"query-controls-order-by-select",label:(0,l.__)("Order by","advanced-posts-blocks"),value:a,options:null!=y&&null!==(o=y.supports)&&void 0!==o&&o["page-attributes"]?[...w,{label:(0,l.__)("Page Order","advanced-posts-blocks"),value:"menu_order"}]:w,onChange:e=>{e!==a&&h(e)}}),v&&(0,t.createElement)(n.SelectControl,{key:"query-controls-order-select",label:(0,l.__)("Order","advanced-posts-blocks"),value:r,options:[{label:(0,l.__)("DESC","advanced-posts-blocks"),value:"desc"},{label:(0,l.__)("ASC","advanced-posts-blocks"),value:"asc"}],onChange:e=>{e!==r&&v(e)}}),!g&&b&&(0,t.createElement)(n.RangeControl,{key:"query-controls-range-control",label:(0,l.__)("Number of items","advanced-posts-blocks"),value:s,onChange:b,min:m,max:u}),_&&(0,t.createElement)(n.CheckboxControl,{key:"query-controls-nopaging-control",label:(0,l.__)("Show all posts","advanced-posts-blocks"),checked:g,onChange:k}),f&&(0,t.createElement)(n.RangeControl,{key:"query-controls-offset-control",label:(0,l.__)("Offset","advanced-posts-blocks"),value:c,onChange:f,min:0,max:u}),_&&(0,t.createElement)(n.CheckboxControl,{key:"query-controls-ignore-sticky-posts-control",label:(0,l.__)("Ignore sticky posts","advanced-posts-blocks"),checked:p,onChange:_})]}var u=window.wp.data,m=e=>{let{onChange:o,value:s,filter:r=(()=>!0)}=e;const a=(0,u.useSelect)((e=>e("core").getPostTypes({per_page:-1})||[]),[]).filter((e=>!["attachment","wp_block"].includes(e.slug))).filter(r);return(0,t.createElement)(n.SelectControl,{label:(0,l.__)("Post Type","advanced-posts-blocks"),value:s.slug,options:a.map((e=>({label:e.name,value:e.slug}))),onChange:e=>{const t=a.find((t=>t.slug===e));o(t)}})},g=e=>{var o;let{taxonomy:s,termIds:l,handleChange:r}=e;const a=null!==(o=(0,u.useSelect)((e=>e("core").getEntityRecords("taxonomy",s.slug,{per_page:-1})),[s]))&&void 0!==o?o:[],c=a.reduce(((e,t)=>({...e,[t.id]:t})),{}),d=a.reduce(((e,t)=>({...e,[t.name]:t})),{});return a&&a.length>0?(0,t.createElement)(n.FormTokenField,{key:s.rest_base,label:s.labels.name,value:l.map((e=>c[e].name)),suggestions:a.map((e=>e.name)),onChange:e=>{const t=e.map((e=>{var t;return null===(t=d[e])||void 0===t?void 0:t.id}));t.includes(void 0)||r(t)}}):null},y=JSON.parse('{"name":"advanced-posts-blocks/posts","apiVersion":2,"title":"Multiple Posts","description":"Display multiple posts.","icon":"admin-post","textdomain":"advanced-posts-blocks","attributes":{"align":{"type":"string","enum":["center","wide","full"]},"postType":{"type":"string","default":"post"},"postsToShow":{"type":"number","default":5},"offset":{"type":"number","default":0},"order":{"type":"string","default":"desc"},"orderBy":{"type":"string","default":"date"},"ignoreStickyPosts":{"type":"boolean","default":true},"showAllPosts":{"type":"boolean","default":false}},"supports":{"align":["center","wide","full"],"html":false},"category":"widgets","editorScript":"file:./index.js"}');const{name:b}=y;const{name:v,supports:h,category:f}=y,_=(0,l.__)("Multiple Posts","advanced-posts-blocks");(0,o.registerBlockType)(v,{supports:h,category:f,title:`${_} (Advanced Posts Blocks)`,description:(0,l.__)("Display multiple posts.","advanced-posts-blocks"),keywords:["multiple posts",(0,l.__)("multiple posts","advanced-posts-blocks")],icon:(0,t.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,t.createElement)(n.Path,{fill:"none",d:"M0 0h24v24H0V0z"}),(0,t.createElement)(n.Path,{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM10 9h8v2h-8zm0 3h4v2h-4zm0-6h8v2h-8z"})),edit:e=>{let{attributes:o,setAttributes:r}=e;const{postsToShow:d,order:i,orderBy:v,postType:h,offset:f,ignoreStickyPosts:_,showAllPosts:k}=o,w=(C=h,(0,u.useSelect)((e=>e("core").getPostType(C)||{}),[C]));var C;const P=(e=>(0,u.useSelect)((t=>(t("core").getTaxonomies({per_page:-1})||[]).filter((t=>(e.taxonomies||[]).includes(t.slug)))),[e]))(w),S={};for(const e of P){var E;const t=o[e.rest_base];Array.isArray(t)&&t.length>0?S[e.rest_base]=t.filter(s.identity):null!=t&&t.terms&&(null===(E=t.terms)||void 0===E?void 0:E.length)>0&&(S[e.rest_base]=t.terms)}const O=((e,t)=>(0,u.useSelect)((o=>""===t.search?[]:o("core").getEntityRecords("postType",e.slug,t)||[]),[e.slug,t]))(w,{...S,order:i,offset:f,orderby:v,per_page:d,advanced_posts_blocks_preview:!0}),A=w.labels||{},T=P.map(((e,s)=>{var n,l,a;const c=null!==(n=null!==(l=null===(a=o[e.rest_base])||void 0===a?void 0:a.terms)&&void 0!==l?l:o[e.rest_base])&&void 0!==n?n:[];return(0,t.createElement)(g,{key:s,taxonomy:e,termIds:c,handleChange:t=>{r({[e.rest_base]:{terms:t}})}})})),x=(0,l.__)("Query setting","advanced-posts-blocks"),B=(0,t.createElement)(c.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:x},(0,t.createElement)(m,{value:w,onChange:e=>{null!=e&&e.supports["page-attributes"]||"menu_order"!==v||r({orderBy:y.attributes.orderBy.default}),r({postType:e.slug})}}),T,(0,t.createElement)(p,{order:i,orderBy:v,offset:f,ignoreStickyPosts:_,showAllPosts:k,postType:w,numberOfItems:d,onOffsetChange:e=>r({offset:e}),onOrderChange:e=>r({order:e}),onOrderByChange:e=>r({orderBy:e}),onNumberOfItemsChange:e=>r({postsToShow:e}),onIgnoreStickyPostsChange:e=>r({ignoreStickyPosts:e}),onshowAllPostsChange:e=>{r({showAllPosts:e})}}))),I=Array.isArray(O)&&O.length;return(0,t.createElement)("div",(0,c.useBlockProps)(),B,I?(0,t.createElement)(n.Disabled,null,(0,t.createElement)(a(),{block:b,attributes:o})):(0,t.createElement)(n.Placeholder,{icon:"admin-post",label:(0,l.__)("Multiple Posts","advanced-posts-blocks")},Array.isArray(O)?A.not_found:(0,t.createElement)(n.Spinner,null)))},save:()=>null})}();